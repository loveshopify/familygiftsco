{"version":3,"sources":["webpack:///./src/js/components/ui/cart/CartTotal.js"],"names":["CartTotal","parentNode","ctx","useState","amount","setAmount","discount","setDiscount","useEffect","dataset","initialvalue","initialdiscount","on","state","cart","total_price","className","toFixed","component","node","element","ReactDOM","render"],"mappings":"2KAUMA,G,MAAY,SAAC,GAAwB,IAAtBC,EAAsB,EAAtBA,WAAYC,EAAU,EAAVA,IAAU,EACbC,mBAAS,MADI,WAClCC,EADkC,KAC1BC,EAD0B,OAETF,mBAAS,MAFA,WAElCG,EAFkC,KAExBC,EAFwB,KAazC,OATAC,qBAAU,WACRH,EAAUJ,EAAWQ,QAAQC,cAC7BH,EAAYN,EAAWQ,QAAQE,iBAE/BT,EAAIU,GAAG,cAAc,SAACC,GACpBR,EAAUQ,EAAMC,KAAKC,kBAEtB,IAGD,oCACE,uBAAGC,UAAU,SAASZ,EAAS,IAAH,QAAQA,EAAS,KAAKa,QAAQ,IAAO,6CAChEX,GACC,oCACE,uBAAGU,UAAU,YACX,8BAAOV,EAAP,cAQGY,uBAAU,SAACC,EAAMjB,GAC9B,IAAMkB,EAAU,kBAACpB,EAAD,CAAWE,IAAKA,EAAKD,WAAYkB,IACjDE,IAASC,OAAOF,EAASD","file":"23.chunk.2e3eccc5ed4153575c0b.js","sourcesContent":["import React, { Component, useState, useEffect, Fragment } from 'react';\nimport ReactDOM from 'react-dom';\nimport { component } from 'picoapp';\nimport axios from 'axios';\n\nconst getCartData = async () => {\n  const response = await axios.get('/cart.js', { headers: { Pragma: 'no-cache' } });\n  return response.data;\n};\n\nconst CartTotal = ({ parentNode, ctx }) => {\n  const [amount, setAmount] = useState(null);\n  const [discount, setDiscount] = useState(null);\n\n  useEffect(() => {\n    setAmount(parentNode.dataset.initialvalue);\n    setDiscount(parentNode.dataset.initialdiscount);\n\n    ctx.on('cartUpdate', (state) => {\n      setAmount(state.cart.total_price);\n    });\n  }, []);\n\n  return (\n    <>\n      <p className=\"total\">{amount ? `$${(amount / 100).toFixed(2)}` : <span>Loading...</span>}</p>\n      {discount && (\n        <>\n          <p className=\"discount\">\n            <span>{discount}% OFF</span>\n          </p>\n        </>\n      )}\n    </>\n  );\n};\n\nexport default component((node, ctx) => {\n  const element = <CartTotal ctx={ctx} parentNode={node} />;\n  ReactDOM.render(element, node);\n});\n"],"sourceRoot":""}