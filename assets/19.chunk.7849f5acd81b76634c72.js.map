{"version":3,"sources":["webpack:///./src/js/components/ui/Modal.js"],"names":["Modal","el","ctx","this","isActive","identifier","dataset","init","initAnimations","bindEvents","modal","body","document","querySelector","pageWraper","modalContent","modalBox","backdrop","instanceOptions","str2json","options","wrapper","tl","gsap","timeline","onStart","set","display","paused","onComplete","disableBodyScroll","onReverseComplete","classList","remove","enableBodyScroll","immediateRender","from","duration","opacity","autoAlpha","y","ease","on","state","action","close","addEventListener","e","disabled","open","play","then","CustomEvent","dispatchEvent","reverse","isInactive","component","node"],"mappings":"4vBAMMA,E,WACJ,WAAYC,EAAIC,GAAK,YACnBC,KAAKD,IAAMA,EACXC,KAAKC,UAAW,EAChBD,KAAKE,WAAaJ,EAAGK,QAAQD,WAC7BF,KAAKI,KAAKN,GACVE,KAAKK,iBACLL,KAAKM,a,yCAGFR,GAEHE,KAAKF,GAAKA,EACVE,KAAKO,MAAQT,EACbE,KAAKQ,KAAOC,SAASC,cAAc,QACnCV,KAAKW,WAAaF,SAASC,cAAc,SACzCV,KAAKY,aAAed,EAAGY,cAAc,mBACrCV,KAAKa,SAAWf,EAAGY,cAAc,eACjCV,KAAKc,SAAWhB,EAAGY,cAAc,aAEjC,IAIMK,EAAkBC,YAAShB,KAAKF,GAAGK,QAAQc,SACjC,EAAH,KALI,IAKiBF,K,uCAGnB,WACTP,EAAOC,SAASD,KAChBU,EAAUlB,KAAKF,GACfgB,EAAWd,KAAKc,SAChBP,EAAQP,KAAKa,SAEnBb,KAAKmB,GAAKC,IAAKC,SAAS,CACtBC,QAAS,WACPF,IAAKG,IAAIL,EAAS,CAAEM,QAAS,UAG/BC,QAAQ,EACRC,WAAY,WACV,EAAKzB,UAAW,EAChB0B,YAAkB,EAAKf,eAEzBgB,kBAAmB,WACjB,EAAK3B,UAAW,EAChBO,EAAKqB,UAAUC,OAAO,iBACtBC,YAAiB,EAAKnB,cACtBQ,IAAKG,IAAIL,EAAS,CAAEM,QAAS,YAIjCxB,KAAKmB,GAAGI,IAAIL,EAAS,CAAEM,QAAS,OAAQQ,iBAAiB,IAGzDhC,KAAKmB,GAAGc,KAAKf,EAAS,CAAEgB,SAAU,GAAKC,QAAS,IAChDnC,KAAKmB,GAAGc,KAAKnB,EAAU,CAAEoB,SAAU,IAAME,UAAW,IAEpDpC,KAAKmB,GAAGc,KACN1B,EACA,CACE2B,SAAU,GACVG,EAAG,MACHD,UAAW,EACXE,KAAM,gBAER,W,mCAIS,WACXtC,KAAKD,IAAIwC,GAAG,SAAS,SAACC,GAChBA,EAAMtC,YAAc,EAAKA,YACO,mBAAvB,EAAKsC,EAAMC,SACpB,EAAKD,EAAMC,aAKjBzC,KAAKD,IAAIwC,GAAG,cAAc,SAACC,GACrBA,EAAMtC,YAAc,EAAKA,YAC3B,EAAKwC,WAIL1C,KAAKc,UACPd,KAAKc,SAAS6B,iBAAiB,SAAS,SAACC,GACvC,EAAKF,a,+BAeL1C,KAAK6C,WAGL7C,KAAKC,SACPD,KAAK0C,QAEL1C,KAAK8C,U,6BAIF,WACD9C,KAAKC,UAGTD,KAAKmB,GAAG4B,OAAOC,MAAK,WAClB,IAAM/C,EAAW,IAAIgD,YAAY,YACjC,EAAKnD,GAAGoD,cAAcjD,Q,8BAIlB,WACDD,KAAKC,UAGVD,KAAKmB,GAAGgC,UAAUH,MAAK,WACrB,IAAMI,EAAa,IAAIH,YAAY,cACnC,EAAKnD,GAAGoD,cAAcE,U,KAKbC,uBAAU,SAACC,EAAMvD,GAC9B,IAAIF,EAAMyD,EAAMvD","file":"19.chunk.7849f5acd81b76634c72.js","sourcesContent":["import { gsap } from 'gsap';\nimport { component } from 'picoapp';\nimport { disableBodyScroll, enableBodyScroll, clearAllBodyScrollLocks } from 'body-scroll-lock';\n\nimport { str2json } from '../../utilities';\n\nclass Modal {\n  constructor(el, ctx) {\n    this.ctx = ctx;\n    this.isActive = false;\n    this.identifier = el.dataset.identifier;\n    this.init(el);\n    this.initAnimations();\n    this.bindEvents();\n  }\n\n  init(el) {\n    // cache elements\n    this.el = el;\n    this.modal = el;\n    this.body = document.querySelector('body');\n    this.pageWraper = document.querySelector('.Main');\n    this.modalContent = el.querySelector('.Modal__content');\n    this.modalBox = el.querySelector('.Modal__box');\n    this.backdrop = el.querySelector('.backdrop');\n\n    const defaults = {\n      // position: 'left'\n    };\n\n    const instanceOptions = str2json(this.el.dataset.options);\n    const options = { ...defaults, ...instanceOptions };\n  }\n\n  initAnimations() {\n    const body = document.body;\n    const wrapper = this.el;\n    const backdrop = this.backdrop;\n    const modal = this.modalBox;\n\n    this.tl = gsap.timeline({\n      onStart: () => {\n        gsap.set(wrapper, { display: 'flex' });\n        // body.classList.add('has-modalOpen');\n      },\n      paused: true,\n      onComplete: () => {\n        this.isActive = true;\n        disableBodyScroll(this.modalContent);\n      },\n      onReverseComplete: () => {\n        this.isActive = false;\n        body.classList.remove('has-modalOpen');\n        enableBodyScroll(this.modalContent);\n        gsap.set(wrapper, { display: 'none' });\n      },\n    });\n\n    this.tl.set(wrapper, { display: 'flex', immediateRender: false });\n\n    // Shade\n    this.tl.from(wrapper, { duration: 0.4, opacity: 0 });\n    this.tl.from(backdrop, { duration: 0.35, autoAlpha: 0 });\n\n    this.tl.from(\n      modal,\n      {\n        duration: 0.5,\n        y: '50%',\n        autoAlpha: 0,\n        ease: 'Expo.easeOut',\n      },\n      '-=0.4'\n    );\n  }\n\n  bindEvents() {\n    this.ctx.on('Modal', (state) => {\n      if (state.identifier == this.identifier) {\n        if (typeof this[state.action] === 'function') {\n          this[state.action]();\n        }\n      }\n    });\n\n    this.ctx.on('closeModal', (state) => {\n      if (state.identifier == this.identifier) {\n        this.close();\n      }\n    });\n\n    if (this.backdrop) {\n      this.backdrop.addEventListener('click', (e) => {\n        this.close();\n      });\n    }\n\n    // Close modal with ESC key\n    // window.jQuery(document).keyup((e) => {\n    //   if (e.keyCode == 27 && this.isActive) {\n    //     // escape key maps to keycode `27`\n    //     this.close();\n    //   }\n    // });\n  }\n\n  toggle() {\n    // Bailout if toggle component is disabled\n    if (this.disabled) {\n      return;\n    }\n    if (this.isActive) {\n      this.close();\n    } else {\n      this.open();\n    }\n  }\n\n  open() {\n    if (this.isActive) {\n      return;\n    }\n    this.tl.play().then(() => {\n      const isActive = new CustomEvent('isActive');\n      this.el.dispatchEvent(isActive);\n    });\n  }\n\n  close() {\n    if (!this.isActive) {\n      return;\n    }\n    this.tl.reverse().then(() => {\n      const isInactive = new CustomEvent('isInactive');\n      this.el.dispatchEvent(isInactive);\n    });\n  }\n}\n\nexport default component((node, ctx) => {\n  new Modal(node, ctx);\n});\n"],"sourceRoot":""}